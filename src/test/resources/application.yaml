villagecompute:
  auth:
    cookie:
      name: vu_anon_id
      secure: true
      http-only: true
      same-site: Lax
      max-age: 31536000
    bootstrap:
      token: test-bootstrap-token
      admin-exists: false
    jwt:
      secret: unit-test-signing-secret
      issuer: test-suite
      audience: village-homepage-test
      expiration-minutes: 30
    rate-limit:
      bootstrap:
        max-requests: 5
        window-seconds: 3600
      login:
        max-requests: 20
        window-seconds: 60

quarkus:
  log:
    level: WARN
  otel:
    sdk:
      disabled: true
  # LangChain4j test configuration (Task I4.T1)
  langchain4j:
    anthropic:
      api-key: sk-ant-test-fake-key-for-testing-12345678

  # NO DEFAULT DATASOURCE CONFIGURATION
  # Legacy tests use @QuarkusTestResource(H2TestResource.class) which provides H2 configuration
  # New integration tests using BaseIntegrationTest use @TestProfile(PostgreSQLTestProfile.class) which provides PostgreSQL configuration

  # Disable OIDC security for integration tests
  oidc:
    enabled: false
  security:
    auth:
      enabled-in-dev-mode: false
    jpa:
      enabled: false

  # Hibernate Search Elasticsearch configuration for tests
  hibernate-search-orm:
    enabled: false
    elasticsearch:
      version: 8

alphavantage:
  api-key: test-api-key

email:
  imap:
    host: localhost
    port: 1143
    username: test@example.com
    password: ${IMAP_PASSWORD:test_placeholder}
    folder: INBOX
    poll-interval-seconds: 60

# Profile for PostgreSQL 17 + PostGIS integration tests (Task I1.T2)
"%test":
  quarkus:
    datasource:
      db-kind: postgresql
      username: test
      password: test
      devservices:
        enabled: true
        image-name: postgis/postgis:17-3.5-alpine
        init-script-path: db/init-test-postgis.sql
    hibernate-orm:
      database:
        generation: drop-and-create
      log:
        sql: false
      sql-load-script: no-file
